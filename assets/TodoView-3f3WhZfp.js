import{r as u,d as w,c as m,a as e,w as i,v as d,f as p,t as a,F as x,o as v}from"./index-BGm1sirQ.js";import{a as k}from"./axios-C8DqakIB.js";const T=e("h1",null,"Todo API",-1),U=e("h2",null,"註冊",-1),$=e("br",null,null,-1),b=e("br",null,null,-1),V=e("h2",null,"登入",-1),f=e("br",null,null,-1),I=e("br",null,null,-1),D=e("h2",null,"驗證",-1),F={key:0},B={key:1},r="https://todolist-api.hexschool.io",P={__name:"TodoView",setup(E){const s=u({email:"",password:"",nickname:""}),_=u(""),h=async()=>{try{console.log(`${r}/users/sign_up`);const o=await k.post(`${r}/users/sign_up`,s.value);console.log(o),_.value=o.data.uid}catch(o){console.log(o)}},t=u({email:"",password:""}),g=u(""),y=async()=>{try{console.log(`${r}/users/sign_in`);const o=await k.post(`${r}/users/sign_in`,t.value);console.log(o),g.value=o.data.token,document.cookie=`customTodoToken=${o.data.token}; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/`}catch(o){console.log(o)}},c=u({nickname:"",uid:""});return w(async()=>{var o=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$)|^.*$/,"$1");console.log(o);const l=await k.get(`${r}/users/checkout`,{headers:{Authorization:o}});console.log(l),c.value=l.data}),(o,l)=>(v(),m(x,null,[T,e("div",null,[U,i(e("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[0]||(l[0]=n=>s.value.email=n)},null,512),[[d,s.value.email]]),i(e("input",{type:"text",placeholder:"Password","onUpdate:modelValue":l[1]||(l[1]=n=>s.value.password=n)},null,512),[[d,s.value.password]]),i(e("input",{type:"text",placeholder:"nickname","onUpdate:modelValue":l[2]||(l[2]=n=>s.value.nickname=n)},null,512),[[d,s.value.nickname]]),e("button",{type:"button",onClick:h},"註冊"),$,p(" "+a(s.value)+" ",1),b,p(" UID: "+a(_.value),1)]),e("div",null,[V,i(e("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[3]||(l[3]=n=>t.value.email=n)},null,512),[[d,t.value.email]]),i(e("input",{type:"text",placeholder:"Password","onUpdate:modelValue":l[4]||(l[4]=n=>t.value.password=n)},null,512),[[d,t.value.password]]),e("button",{type:"button",onClick:y},"登入"),f,p(" "+a(t.value)+" ",1),I,p(" Token: "+a(g.value),1)]),e("div",null,[D,c.value.uid?(v(),m("div",F,[e("p",null,"UID: "+a(c.value.uid),1),e("p",null,"Nickname: "+a(c.value.nickname),1)])):(v(),m("div",B,"你還沒有登入喔！"))])],64))}};export{P as default};
